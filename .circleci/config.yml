version: 2.1

jobs:
  clean-build:
    docker:
      - image: maven:3.5.3-jdk-8-alpine
    steps:
      - checkout
      - run:
          name: clean install
          command: mvn clean install -DskipTests

  test:
    docker:
      - image: maven:3.5.3-jdk-8-alpine
    steps:
      - checkout
      - run:
          name: test code
          command: mvn test

workflows:
  default:
    jobs:
      - clean-build
      - test:
          requires: [clean-build]
